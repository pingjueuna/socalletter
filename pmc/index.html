     <!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>LG SW PM Competition 2025 â€“ ë´‰ì¸ì„ ì•„ì´í…œ/ë°œí‘œ ìˆœì„œ ë½‘ê¸°</title>
<style>
  :root{
    --paper:#ead9b7; --paper-deep:#e2cfa8; --edge:#c1aa7f;
    --seal1:#565a60; --seal2:#3e4247; --sealLine:#cdd3da;
    --ink:#1f1b14; --ui:#1c2236; --ui-b:#2e3a5a;
  }
  html,body{height:100%}
  body{margin:0;background:linear-gradient(180deg,#0b0f16,#12182a);color:#f3f6ff;
       font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Malgun Gothic}

  h1{margin:18px 0 6px;text-align:center;font-size:22px}
  .sub{margin:0 0 12px;text-align:center;color:#aab4c9;font-size:12px}

  .controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:center;margin:10px auto 14px;max-width:1180px}
  .controls>*{background:var(--ui);color:#e8ecf7;border:1px solid var(--ui-b);border-radius:12px;padding:10px 12px;font-size:14px}
  button{cursor:pointer}

  /* ===== 2ì—´ ë ˆì´ì•„ì›ƒ ===== */
  .layout{max-width:1180px;margin:0 auto;padding:0 16px 16px;
          display:grid;grid-template-columns:360px 1fr;gap:18px;align-items:start}
  @media (max-width:980px){ .layout{grid-template-columns:1fr} }

  /* ===== ì¹´ë“œ ì˜ì—­ ===== */
  .stage{width:100%}
  .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:18px}
  @media (max-width:1100px){.grid{grid-template-columns:repeat(3,1fr)}}
  @media (max-width:780px){.grid{grid-template-columns:repeat(2,1fr)}}

  .card{width:100%;aspect-ratio:3/4;perspective:1100px;cursor:pointer;user-select:none}
  .inner{position:relative;width:100%;height:100%}
  .face{
    position:absolute;inset:0;border-radius:14px;overflow:hidden;border:2px solid var(--edge);
    backface-visibility:hidden;transform-style:preserve-3d;
    transition:transform .6s cubic-bezier(.2,.7,.2,1);
    display:flex;flex-direction:column;align-items:center;justify-content:space-between;padding:14px 10px;
    box-shadow:0 4px 0 var(--edge), inset 0 0 0 3px #0001;
  }
  .front{
    background:
      radial-gradient(500px 220px at 50% -30px, #ffffffaa 0%, transparent 70%),
      linear-gradient(180deg,var(--paper),var(--paper-deep));
    color:var(--ink); transform:rotateY(0deg);
  }
  .back{
    background:
      radial-gradient(600px 240px at 50% -40px, #ffffffaa 0%, transparent 70%),
      linear-gradient(180deg,var(--paper),var(--paper-deep));
    color:var(--ink); transform:rotateY(180deg);
  }
  .card.revealed .front{transform:rotateY(180deg)}
  .card.revealed .back{transform:rotateY(0deg)}
  .title{font-weight:900;font-size:26px;letter-spacing:.08em}

  .seal, .sealInfo{
    border-radius:50%; position:relative; display:flex; align-items:center; justify-content:center; text-align:center;
    background:radial-gradient(circle at 50% 50%, var(--seal1) 0 55%, var(--seal2) 56% 100%);
    box-shadow:inset 0 0 18px rgba(0,0,0,.55)
  }
  .seal{width:60%;aspect-ratio:1}
  .seal::before,.seal::after{content:"";position:absolute;border:2px solid var(--sealLine);border-radius:50%}
  .seal::before{inset:10%} .seal::after{inset:24%}
  .rune{position:absolute;width:42%;height:42%;clip-path:polygon(50% 0,0 90%,100% 90%);
        border-left:3px solid var(--sealLine);border-right:3px solid var(--sealLine);border-bottom:3px solid var(--sealLine);transform:translateY(6%)}
  .caption{font-size:12px;color:#4b4337}

  .sealInfo{width:70%;aspect-ratio:1;padding:12px}
  .sealInfo::before,.sealInfo::after{content:"";position:absolute;border-radius:50%;z-index:1}
  .sealInfo::before{inset:10%;border:2px dashed #cfd6dd90}
  .sealInfo::after{inset:22%;border:2px solid #cfd6dd60}
  .sealInfo .order,.sealInfo .item,.sealInfo .desc{position:relative;z-index:2;color:#eef3ff;text-shadow:0 0 10px #cbd6e7}
  .sealInfo .order{font-size:30px;font-weight:900;margin-top:2px}
  .sealInfo .item{font-size:20px;font-weight:800;margin-top:6px}
  .sealInfo .desc{font-size:13px;opacity:.95;line-height:1.35;margin-top:6px}
  .footer{height:24px}

  /* ===== í‘œ(íŒ¨ë„) â€“ ì™¼ìª½ ê³ ì • í­ ===== */
  .panel{width:100%}
  .cardTable{width:100%;border-collapse:collapse;font-size:14px;background:#101625;border:1px solid #2a3553;border-radius:12px;overflow:hidden}
  th,td{padding:10px;border-bottom:1px solid #273258}
  th{background:#162038;color:#d6dff0}
  tr:last-child td{border-bottom:0}
  .note{color:#aab4c9;font-size:12px;margin-top:6px;text-align:center}

  /* í‘œ ë†’ì´ ìŠ¤í¬ë¡¤(ë§ì€ íŒ€ ëŒ€ë¹„) */
  .tableWrap{max-height:62vh;overflow:auto;border-radius:12px}
  @media (max-width:980px){ .tableWrap{max-height:none} }

  /* í† ìŠ¤íŠ¸ */
  .toast{position:fixed;left:50%;top:18px;transform:translateX(-50%) scale(.98);
         background:#1a2236;border:1px solid #3a4c7a;border-radius:12px;padding:10px 14px;
         color:#ffd76d;box-shadow:0 12px 30px rgba(0,0,0,.35);opacity:0;pointer-events:none;z-index:10}
  .toast.show{animation:toastIn .6s ease forwards}
  @keyframes toastIn{to{opacity:1;transform:translateX(-50%) scale(1)}}
</style>
</head>
<body>
  <h1>LG SW PM Competition 2025 â€“ ë´‰ì¸ì„ ì¹´ë“œ ë½‘ê¸°</h1>
  <p class="sub">íŒ€ë‹¹ 1ì¥ Â· íŒ€1 ì„ íƒê¶Œ(ì¤‘ë³µ ê¸ˆì§€) Â· ë¯¸ì„ íƒ ì¹´ë“œë§Œ ì…”í”Œ</p>

  <div class="controls">
    <label>í˜„ì¬ íŒ€:
      <select id="teamSel">
        <option>íŒ€1</option><option>íŒ€2</option><option>íŒ€3</option>
        <option>íŒ€4</option><option>íŒ€5</option><option>íŒ€6</option><option>íŒ€7</option>
      </select>
    </label>
    <label><input type="checkbox" id="team1Choice" checked/> íŒ€1 ë°œí‘œ ìˆœì„œ ì„ íƒê¶Œ</label>
    <button class="primary" id="shuffleRemain">ì…”í”Œ(ë¯¸ì„ íƒë§Œ)</button>
    <button id="resetAll">ì „ì²´ ì´ˆê¸°í™”</button>
    <button class="primary" id="csvBtn">ê²°ê³¼ CSV</button>
  </div>

  <!-- âœ… í‘œ ì™¼ìª½ / ì¹´ë“œ ì˜¤ë¥¸ìª½ -->
  <section class="layout">
    <div class="panel">
      <div class="tableWrap">
        <table class="cardTable">
          <thead><tr><th style="width:28%">íŒ€</th><th style="width:24%">ë°œí‘œ ìˆœì„œ</th><th>ì•„ì´í…œ</th><th style="width:30%">ì„¤ëª…/ë¹„ê³ </th></tr></thead>
          <tbody id="logBody"></tbody>
        </table>
      </div>
      <p class="note">ì¹´ë“œë¥¼ ë½‘ìœ¼ë©´ ë‹¤ìŒ ë¯¸ë°°ì • íŒ€ìœ¼ë¡œ ìë™ ì´ë™í•©ë‹ˆë‹¤.</p>
    </div>

    <div class="stage"><div class="grid" id="deck"></div></div>
  </section>

  <div class="toast" id="toast"><b>ë´‰ì¸ í•´ì œ!</b> <span id="tmsg"></span></div>

<script>
/* ===== ë°ì´í„° ===== */
const ITEMS = [
  { name:"ğŸª½ ìˆœê°„ì´ë™ì˜ ë¶€ì ", desc:"Day2 ë°œí‘œ ìˆœì„œ ë³€ê²½ê¶Œ" },
  { name:"ğŸŒªï¸ ì „í™˜ì˜ ë¶€ì ",   desc:"14:00 ëŒë°œ ë°ëª¬ êµì²´ 1íšŒ" },
  { name:"â³ ì‹œê°„ì˜ ëª¨ë˜ì‹œê³„", desc:"Day1 ë§ˆê° ì‹œê°„ 10ë¶„ ì—°ì¥" },
  { name:"ğŸ­ í™˜ì˜ì˜ ê±°ìš¸",     desc:"Day1 ì¤‘ 1ë¶„ê°„ íƒ€ íŒ€ ì‚°ì¶œë¬¼ ì¼ë¶€ ê´€ì°°" },
  { name:"ğŸ”® í˜¼ëˆì˜ ìˆ˜ì •êµ¬",   desc:"Day1 ì¤‘ íƒ€ íŒ€ê³¼ ìë¦¬ êµí™˜(ì„ íƒ ê°€ëŠ¥)" },
  { name:"ğŸ‘• í—Œí„°ìŠ¤ ê¸°ë… ì˜ë³µ+1", desc:"ê¸°ë… ì˜ë³µ 1ë²Œ ì¶”ê°€ íšë“" },
  { name:"ğŸœ í—Œí„°ìŠ¤ ì‹ ë¼ë©´",   desc:"ì „íˆ¬ì‹ëŸ‰ ì§€ê¸‰ (ì‹¤ë¬¼ ë¼ë©´)" }
]; // 7ì¥

const deckEl = document.getElementById('deck');
const teamSel = document.getElementById('teamSel');
const team1ChoiceEl = document.getElementById('team1Choice');
const logBody = document.getElementById('logBody');
const toastEl = document.getElementById('toast');
const tmsgEl = document.getElementById('tmsg');

let deck = [];                 // [{id,order,item, revealed:false}]
let results = {};              // íŒ€ë³„ { order, item, desc, note }
let usedOrders = new Set();    // ì´ë¯¸ ë°°ì •ëœ ë°œí‘œ ìˆœì„œ(íŒ€1 ì„ íƒ í¬í•¨)
const teamList = ['íŒ€1','íŒ€2','íŒ€3','íŒ€4','íŒ€5','íŒ€6','íŒ€7'];

function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; }
const allOrders = ()=> [1,2,3,4,5,6,7];
function toast(msg){ tmsgEl.textContent = msg; toastEl.classList.add('show'); setTimeout(()=>toastEl.classList.remove('show'), 2000); }
function nextTeam(){ for(const t of teamList){ if(!results[t]){ teamSel.value = t; return; } } }

function buildDeckInitial(){
  deck = [];
  const orders = shuffle(allOrders());
  const items  = shuffle([...ITEMS]);
  for(let i=0;i<7;i++){ deck.push({ id:'c'+i, order:orders[i], item:items[i], revealed:false }); }
}

function renderDeck(){
  deckEl.innerHTML = '';
  deck.forEach(card=>{
    const el = document.createElement('div');
    el.className = 'card' + (card.revealed ? ' revealed':'');
    el.dataset.id = card.id;
    el.innerHTML = `
      <div class="inner">
        <div class="face front">
          <div class="title">ë´‰ì¸ì„</div>
          <div class="seal"><div class="rune"></div></div>
          <div class="caption">ë´‰ì¸ì„ í•´ì œí•˜ë¼</div>
        </div>
        <div class="face back">
          <div class="title">ë´‰ì¸ì„</div>
          <div class="sealInfo">
            <div class="order">ë°œí‘œ ${card.order}</div>
            <div class="item">${card.item.name}</div>
            <div class="desc">${card.item.desc}</div>
          </div>
          <div class="footer"></div>
        </div>
      </div>`;
    if(!card.revealed){ el.addEventListener('click', ()=>revealCard(card.id, el)); }
    deckEl.appendChild(el);
  });
}

function renderLog(){
  logBody.innerHTML = '';
  teamList.forEach(t=>{
    const r = results[t] || {};
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${t}</td>
      <td>${r.order ?? '<span style="color:#aab4c9">â€”</span>'}</td>
      <td>${r.item ?? '<span style="color:#aab4c9">â€”</span>'}</td>
      <td>${r.note ?? '<span style="color:#aab4c9">ì¹´ë“œ ë¯¸ê°œë´‰</span>'}</td>`;
    logBody.appendChild(tr);
  });
}

function revealCard(cardId, el){
  const team = teamSel.value;
  if(results[team]){ alert(`${team}ì€(ëŠ”) ì´ë¯¸ ì¹´ë“œë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤.`); return; } // íŒ€ë‹¹ 1ì¥

  const card = deck.find(c=>c.id===cardId);
  if(!card || card.revealed) return;

  card.revealed = true;
  el.classList.add('revealed');

  let finalOrder = card.order;
  let note = 'ëœë¤';

  if(team === 'íŒ€1' && team1ChoiceEl.checked){
    while(true){
      const input = prompt('íŒ€1 ì›í•˜ëŠ” ë°œí‘œ ìˆœì„œ (1~7, ì¤‘ë³µ ë¶ˆê°€):', '');
      if(!input){ break; }
      const n = Number(input);
      if(Number.isInteger(n) && n>=1 && n<=7 && !usedOrders.has(n)){ finalOrder = n; note = 'íŒ€1 ì„ íƒê¶Œ'; break; }
      else{ alert('âš ï¸ ì´ë¯¸ ì‚¬ìš©ëœ ë²ˆí˜¸ê±°ë‚˜ ì˜ëª»ëœ ì…ë ¥ì…ë‹ˆë‹¤.'); }
    }
  }else{
    if(usedOrders.has(finalOrder)){
      for(let n=1;n<=7;n++){ if(!usedOrders.has(n)){ finalOrder = n; break; } }
    }
  }

  usedOrders.add(finalOrder);

  /* ì¹´ë“œ ë’·ë©´ í…ìŠ¤íŠ¸ì™€ ë°ì´í„° ë™ê¸°í™”(í‘œì™€ ì–´ê¸‹ë‚¨ ë°©ì§€) */
  card.order = finalOrder;
  el.querySelector('.order').textContent = `ë°œí‘œ ${finalOrder}`;

  results[team] = { order:finalOrder, item:card.item.name, desc:card.item.desc, note };
  renderLog();
  toast(`${team} â€“ ${card.item.name} / ë°œí‘œ ${finalOrder}`);
  nextTeam();
}

function shuffleUnrevealed(){
  const revealed = deck.filter(c=>c.revealed);
  const left = deck.filter(c=>!c.revealed);
  if(left.length===0){ toast('ëª¨ë“  ì¹´ë“œê°€ ì´ë¯¸ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤.'); return; }

  const excludedOrders = new Set(usedOrders);
  revealed.forEach(c => excludedOrders.add(c.order));
  const availableOrders = allOrders().filter(n => !excludedOrders.has(n));

  const usedItems = new Set(revealed.map(c=>c.item.name));
  const availableItems = ITEMS.filter(it => !usedItems.has(it.name));

  shuffle(availableOrders); shuffle(availableItems);
  for(let i=0;i<left.length;i++){ left[i].order = availableOrders[i]; left[i].item = availableItems[i]; }

  renderDeck();
  toast('ë¯¸ì„ íƒ ì¹´ë“œë§Œ ì…”í”Œ ì™„ë£Œ');
}

function resetAll(){
  if(!confirm('ëª¨ë“  ê²°ê³¼ê°€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤. ê³„ì†í• ê¹Œìš”?')) return;
  results = {}; usedOrders.clear(); teamSel.value = 'íŒ€1';
  buildDeckInitial(); renderDeck(); renderLog();
}

function downloadCSV(){
  const rows = [['team','order','item','note']];
  teamList.forEach(t=>{ const r=results[t]||{}; rows.push([t, r.order??'', r.item??'', r.note??'']); });
  const csv = rows.map(r=>r.map(x=>`"${String(x).replace(/"/g,'""')}"`).join(',')).join('\n');
  const blob = new Blob([csv],{type:'text/csv;charset=utf-8;'}); const a = document.createElement('a');
  a.href = URL.createObjectURL(blob); a.download = 'day2_order_and_items.csv'; a.click();
}

/* ì´ˆê¸°í™” */
document.getElementById('shuffleRemain').addEventListener('click', shuffleUnrevealed);
document.getElementById('resetAll').addEventListener('click', resetAll);
document.getElementById('csvBtn').addEventListener('click', downloadCSV);

buildDeckInitial(); renderDeck(); renderLog();
</script>
</body>
</html>
